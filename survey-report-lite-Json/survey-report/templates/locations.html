<!DOCTYPE html>
<html>
<head>
    <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ª–æ–∫–∞—Ü–∏—è–º</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f2f2f2; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .back-link { display: inline-block; margin-bottom: 20px; text-decoration: none; color: #007bff; }
        .back-link:hover { text-decoration: underline; }
        .total { font-weight: bold; margin: 10px 0; font-size: 16px; }
        .satisfaction-good { color: #28a745; font-weight: bold; }
        .satisfaction-medium { color: #ffc107; font-weight: bold; }
        .satisfaction-poor { color: #dc3545; font-weight: bold; }
        .no-data { color: #6c757d; font-style: italic; }
    </style>
</head>
<body>
    <div class="container">
        <a href="/import" class="back-link">‚Üê –ù–∞–∑–∞–¥ –∫ –∏–º–ø–æ—Ä—Ç—É</a>
        <h1>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ª–æ–∫–∞—Ü–∏—è–º</h1>
        
        {% if locations %}
            {% set total_count = 0 %}
            {% for location in locations %}
                {% set total_count = total_count + location.response_count %}
            {% endfor %}
            <div class="total">–í—Å–µ–≥–æ –æ—Ç–≤–µ—Ç–æ–≤: {{ total_count }}</div>
            
            <table>
                <thead>
                    <tr>
                        <th>–õ–æ–∫–∞—Ü–∏—è</th>
                        <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤</th>
                        <th>–°—Ä–µ–¥–Ω—è—è —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å</th>
                        <th>–£—Ä–æ–≤–µ–Ω—å</th>
                    </tr>
                </thead>
                <tbody>
                    {% for location in locations %}
                    <tr>
                        <td>{{ location.location_name }}</td>
                        <td>{{ location.response_count }}</td>
                        <td>
                            {% if location.avg_satisfaction %}
                                {% if location.avg_satisfaction >= 7 %}
                                    <span class="satisfaction-good">{{ "%.2f"|format(location.avg_satisfaction) }}</span>
                                {% elif location.avg_satisfaction >= 5 %}
                                    <span class="satisfaction-medium">{{ "%.2f"|format(location.avg_satisfaction) }}</span>
                                {% else %}
                                    <span class="satisfaction-poor">{{ "%.2f"|format(location.avg_satisfaction) }}</span>
                                {% endif %}
                            {% else %}
                                <span class="no-data">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</span>
                            {% endif %}
                        </td>
                        <td>
                            {% if location.avg_satisfaction %}
                                {% if location.avg_satisfaction >= 7 %}
                                    üü¢ –í—ã—Å–æ–∫–∏–π
                                {% elif location.avg_satisfaction >= 5 %}
                                    üü° –°—Ä–µ–¥–Ω–∏–π
                                {% else %}
                                    üî¥ –ù–∏–∑–∫–∏–π
                                {% endif %}
                            {% else %}
                                -
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ª–æ–∫–∞—Ü–∏—è—Ö. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ–ø—Ä–æ—Å–∞.</p>
        {% endif %}
        
        {% if all_locations and all_locations|length > 0 %}
        <h3>–í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏:</h3>
        <ul>
            {% for loc in all_locations %}
            <li>{{ loc.location_name }}</li>
            {% endfor %}
        </ul>
        {% endif %}
        
        <div style="margin-top: 20px;">
            <a href="/questions">üìà –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º</a>
        </div>
    </div>
</body>
</html>
