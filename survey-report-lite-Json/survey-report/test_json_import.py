#!/usr/bin/env python3
import json
import sqlite3
from import_real_data import import_json_data

# Тестовые данные в формате JSON
test_data = [
    [
        ["Укажите вашу локацию ", "Московский офис"],
        ["Оцените скорость загрузки системы / Оцените быстроту запуска ПК и программ", "2 - Приемлемо"],
        ["Оцените стабильность работы системы / Оцените отсутствие зависаний и сбоев ", "3 - Хорошо"],
        ["Оцените удобство использования монитора и/или экрана ноутбука  / Достаточно ли контрастный, светлый, насыщенный", "3 - Хорошо"],
        [" С какими проблемами вы сталкиваетесь чаще всего? / Зависание компьютера", ""],
        [" С какими проблемами вы сталкиваетесь чаще всего? / Медленная работа программ", "Медленная работа программ"],
        [" С какими проблемами вы сталкиваетесь чаще всего? / Сбои в работе офисных приложений", ""],
        [" С какими проблемами вы сталкиваетесь чаще всего? / Проблемы с печатью", ""],
        [" С какими проблемами вы сталкиваетесь чаще всего? / Сложности с сетевыми дисками", ""],
        ["На сколько вы удовлетворены приложениями семейства Яндекс ? / Удобство интерфейса, стабильность работы приложения", "2 - Приемлемо"],
        ["На сколько вы удовлетворены работой пакетов MS Office ?  / Удобство интерфейса, стабильность работы приложения", "3 - Хорошо"],
        ["Как вы оцениваете работу приложения 1С ? / Удобство интерфейса, стабильность работы приложения", "2 - Неудобно"],
        ["Как вы оцениваете работу приложения Bitrix24? / Удобство интерфейса, стабильность работы приложения", "2 - Неудобно"],
        ["Оцените пакет сторонних приложений установленных на ваш ПК ( Крипто ПРО, нандо КАД, PDF Editor...) / Удобство интерфейса, стабильность работы приложения", "2 - Неудобно"],
        ["Оцените частоту и удобство установки обновлений ПО и ОС / Кратко оцените работу обновлений программного обеспечения и операционной системы.", "1 - Плохо"],
        ["Общая удовлетворенность рабочего места", "5"]
    ],
    [
        ["Укажите вашу локацию ", "Завод Тосно"],
        ["Оцените скорость загрузки системы / Оцените быстроту запуска ПК и программ", "2 - Приемлемо"],
        ["Оцените стабильность работы системы / Оцените отсутствие зависаний и сбоев ", "2 - Приемлемо"],
        ["Оцените удобство использования монитора и/или экрана ноутбука  / Достаточно ли контрастный, светлый, насыщенный", "3 - Хорошо"],
        [" С какими проблемами вы сталкиваетесь чаще всего? / Зависание компьютера", ""],
        [" С какими проблемами вы сталкиваетесь чаще всего? / Медленная работа программ", "Медленная работа программ"],
        [" С какими проблемами вы сталкиваетесь чаще всего? / Сбои в работе офисных приложений", "Сбои в работе офисных приложений"],
        [" С какими проблемами вы сталкиваетесь чаще всего? / Проблемы с печатью", ""],
        [" С какими проблемами вы сталкиваетесь чаще всего? / Сложности с сетевыми дисками", ""],
        ["На сколько вы удовлетворены приложениями семейства Яндекс ? / Удобство интерфейса, стабильность работы приложения", "2 - Приемлемо"],
        ["На сколько вы удовлетворены работой пакетов MS Office ?  / Удобство интерфейса, стабильность работы приложения", "3 - Хорошо"],
        ["Как вы оцениваете работу приложения 1С ? / Удобство интерфейса, стабильность работы приложения", "3 - Удовлетворительно"],
        ["Как вы оцениваете работу приложения Bitrix24? / Удобство интерфейса, стабильность работы приложения", "3 - Удовлетворительно"],
        ["Оцените пакет сторонних приложений установленных на ваш ПК ( Крипто ПРО, нандо КАД, PDF Editor...) / Удобство интерфейса, стабильность работы приложения", "3 - Удовлетворительно"],
        ["Оцените частоту и удобство установки обновлений ПО и ОС / Кратко оцените работу обновлений программного обеспечения и операционной системы.", "2 - Приемлемо"],
        ["Общая удовлетворенность рабочего места", "5"]
    ]
]

db_path = '/var/www/survey-report/survey_complete.db'
count, error = import_json_data(db_path, test_data)

if error:
    print(f"Ошибка: {error}")
else:
    print(f"Успешно импортировано {count} тестовых ответов")
    
    # Проверяем результат
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    
    print("\nЛокации:")
    cursor.execute("SELECT * FROM survey_responses")
    for row in cursor.fetchall():
        print(row)
    
    print("\nВопросы:")
    cursor.execute("SELECT * FROM question_stats")
    for row in cursor.fetchall():
        print(row)
    
    conn.close()
